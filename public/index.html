<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Library Buddy</title>
  <meta name="theme-color" content="#153328">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="../src/styles/variables.css">
  <link rel="stylesheet" href="../src/styles/base.css">
  <link rel="stylesheet" href="../src/styles/theme.css">
  <link rel="stylesheet" href="../src/styles/components.css">
</head>
<body>
  <div id="app" class="app">
    <header class="hud">
      <h1>Library Buddy</h1>
      <div class="controls">
        <button data-action="toggle-motion" id="toggle-motion-btn">Enable Motion Cursor</button>
        <button data-action="start-scan">Scan Books</button>
        <div class="filter-group">
          <label for="manual-isbn">ISBN:</label>
          <input type="text" id="manual-isbn" placeholder="Enter ISBN" />
          <button id="add-isbn-btn">Add Book</button>
        </div>
        <div class="filter-group">
          <label for="sort-filter">Sort by:</label>
          <select id="sort-filter">
            <option value="series">Series</option>
            <option value="author">Author (A-Z)</option>
            <option value="genre">Genre</option>
            <option value="color">Color</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="search-input">Search:</label>
          <input type="text" id="search-input" placeholder="Find a book..." />
          <button id="search-btn">Search</button>
          <button id="clear-search-btn" class="hidden">Clear</button>
        </div>
        <button id="voice-search-btn" class="voice-btn" aria-label="Voice Search">üé§</button>
        <button id="menu-btn" class="menu-btn" aria-label="Menu">‚ò∞</button>
      </div>
    </header>

    <!-- Settings Menu -->
    <div id="settings-menu" class="settings-menu hidden">
      <div class="settings-content">
        <h2>Settings</h2>
        <div class="settings-group">
          <label for="theme-filter-menu">Theme:</label>
          <select id="theme-filter-menu">
            <option value="witchy">Witchy</option>
            <option value="colorful">Colorful</option>
            <option value="minimal">Minimal</option>
          </select>
        </div>
        <div class="settings-group">
          <button data-action="export" class="settings-btn">Export Library (JSON)</button>
          <button data-action="import" class="settings-btn">Import Library (JSON)</button>
          <input type="file" id="import-file" accept="application/json" style="display:none" />
        </div>
        <button id="close-menu-btn" class="close-menu-btn">Close</button>
      </div>
    </div>

    <main class="library">
      <section class="shelves" data-test-id="shelves" aria-label="Bookshelves"></section>

      <section class="webcam-overlay hidden" data-test-id="webcam-overlay" aria-hidden="true">
        <video id="webcam-video" autoplay playsinline muted></video>
        <canvas id="overlay-canvas"></canvas>
        <button class="close-scanner-btn" id="close-scanner-btn" aria-label="Close Scanner">‚úï</button>
      </section>
    </main>

    <footer class="pagination-footer">
      <button id="prev-page" class="page-btn" disabled>‚Üê Previous</button>
      <span id="page-info" class="page-info">Page 1 of 1</span>
      <button id="next-page" class="page-btn" disabled>Next ‚Üí</button>
    </footer>

    <dialog id="book-modal" data-test-id="book-modal">
      <article>
        <img class="book-cover" alt="Book cover" />
        <header>
          <h2 class="book-title">Title</h2>
          <p class="book-author">Author</p>
        </header>
        <footer>
          <button id="view-card-btn" class="card-btn">üìã Library Card</button>
          <button id="close-modal">Close</button>
          <button id="delete-book" class="delete-btn">Remove from Shelf</button>
        </footer>
      </article>
    </dialog>

    <dialog id="confirm-delete-modal" class="confirm-modal">
      <article class="confirm-content">
        <div class="confirm-icon">üìö</div>
        <h3>Remove from Library?</h3>
        <p class="confirm-message">Are you sure you want to remove this book from your library?</p>
        <p class="confirm-book-title"></p>
        <footer class="confirm-footer">
          <button id="cancel-delete" class="cancel-btn">Cancel</button>
          <button id="confirm-delete" class="confirm-delete-btn">Remove Book</button>
        </footer>
      </article>
    </dialog>

    <dialog id="notification-modal" class="notification-modal">
      <article class="notification-content">
        <div class="notification-icon" id="notification-icon">‚ÑπÔ∏è</div>
        <p class="notification-message" id="notification-message"></p>
        <footer class="notification-footer">
          <button id="notification-ok" class="notification-ok-btn">OK</button>
        </footer>
      </article>
    </dialog>

    <dialog id="library-card-modal" class="library-card-modal">
      <article class="library-card-content">
        <button class="close-card-btn" id="close-card-btn" aria-label="Close Library Card">‚úï</button>
        <div class="library-card">
          <div class="card-header">
            <h2 class="card-title" id="card-book-title">Book Title</h2>
            <p class="card-author" id="card-book-author">Author Name</p>
          </div>
          <div class="card-body">
            <div class="borrower-list" id="borrower-list">
              <!-- Borrower entries will be added here -->
            </div>
          </div>
          <div class="card-footer">
            <div class="add-borrower-form">
              <input type="text" id="borrower-name" placeholder="Borrower name" />
              <input type="date" id="borrow-date" />
              <button id="add-borrower-btn">Add Borrower</button>
            </div>
          </div>
        </div>
      </article>
    </dialog>
  </div>

  <div id="magic-cursor" data-test-id="cursor" aria-hidden="true"></div>

  <script type="module" src="../src/js/app.js"></script>
</body>
</html>
